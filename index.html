<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BAG Studios</title>
    <style>
        *{margin:0;padding:0;box-sizing:border-box}
        body{font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif;background:linear-gradient(135deg,#2E8B57 0%,#20B2AA 50%,#48D1CC 100%);min-height:100vh;color:#fff}
        .container{display:flex;min-height:100vh}

        /* Sidebar (untouched) */
        .sidebar{width:250px;background:rgba(0,139,139,.9);backdrop-filter:blur(10px);padding:20px;transition:width .3s;position:fixed;height:100vh;left:0;top:0;z-index:1000;box-shadow:2px 0 20px rgba(0,0,0,.1)}
        .sidebar.collapsed{width:60px}
        .toggle-btn{background:linear-gradient(45deg,#20B2AA,#48D1CC);border:none;color:white;padding:10px;border-radius:50%;cursor:pointer;margin-bottom:30px;width:40px;height:40px;display:flex;align-items:center;justify-content:center;transition:.3s}
        .toggle-btn:hover{transform:rotate(180deg);box-shadow:0 5px 15px rgba(0,0,0,.2)}
        .nav-menu{list-style:none}
        .nav-item{margin-bottom:15px}
        .nav-link{color:white;text-decoration:none;padding:12px 15px;border-radius:8px;display:block;transition:.3s;background:rgba(255,255,255,.1);margin-bottom:10px}
        .nav-link:hover{background:linear-gradient(45deg,rgba(32,178,170,.8),rgba(72,209,204,.8));transform:translateX(5px);box-shadow:0 5px 15px rgba(0,0,0,.2)}
        .nav-link.active{background:linear-gradient(45deg,#20B2AA,#48D1CC)}
        .reddit-link{background:linear-gradient(45deg,#FF6B35,#F7931E)!important}

        /* Main Content (untouched) */
        .main-content{flex:1;margin-left:250px;padding:40px;transition:margin-left .3s}
        .main-content.expanded{margin-left:60px}
        .section{display:none;animation:fadeIn .5s}
        .section.active{display:block}
        @keyframes fadeIn{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}
        .section h1{font-size:3em;margin-bottom:30px;background:linear-gradient(45deg,#fff,#e0f7fa);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
        .section h2{font-size:2em;margin-bottom:20px;color:#e0f7fa}
        .section p{font-size:1.2em;line-height:1.6;margin-bottom:20px;opacity:.9}
        .crew-card{background:rgba(255,255,255,.1);backdrop-filter:blur(10px);padding:25px;border-radius:15px;margin-bottom:20px;border:1px solid rgba(255,255,255,.2);transition:.3s}
        .crew-card:hover{transform:translateY(-5px);box-shadow:0 10px 30px rgba(0,0,0,.2);background:rgba(255,255,255,.15)}
        .crew-name{font-size:1.5em;font-weight:bold;color:#fff;margin-bottom:5px}
        .crew-title{color:#e0f7fa;font-style:italic}
        .contact-info{background:rgba(255,255,255,.1);backdrop-filter:blur(10px);padding:30px;border-radius:15px;border:1px solid rgba(255,255,255,.2);text-align:center}
        .email{font-size:1.3em;color:#fff;text-decoration:none;padding:15px 30px;background:linear-gradient(45deg,#20B2AA,#48D1CC);border-radius:25px;display:inline-block;transition:.3s}
        .email:hover{transform:translateY(-3px);box-shadow:0 5px 20px rgba(0,0,0,.3)}
        .project-card{background:rgba(255,255,255,.1);backdrop-filter:blur(10px);padding:25px;border-radius:15px;margin-bottom:20px;border:1px solid rgba(255,255,255,.2);transition:.3s}
        .project-card:hover{transform:translateY(-5px);box-shadow:0 10px 30px rgba(0,0,0,.2);background:rgba(255,255,255,.15)}
        .project-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:15px}
        .project-name{font-size:1.5em;font-weight:bold;color:#fff}
        .version-tag{background:linear-gradient(45deg,#FF6B35,#F7931E);color:white;padding:5px 12px;border-radius:20px;font-size:.9em;font-weight:bold}
        .project-description{color:#e0f7fa;margin-bottom:20px;line-height:1.5}
        .download-btn{display:inline-flex;align-items:center;gap:8px;background:linear-gradient(45deg,#20B2AA,#48D1CC);color:white;text-decoration:none;padding:12px 24px;border-radius:25px;font-weight:bold;transition:.3s;box-shadow:0 4px 15px rgba(0,0,0,.2)}
        .download-btn:hover{transform:translateY(-3px);box-shadow:0 6px 20px rgba(0,0,0,.3)}
        .download-icon{width:16px;height:16px}

        /* ==========  NEW LOGIN WIDGET  ========== */
        .login-widget{position:fixed;top:15px;right:20px;z-index:2000}
        .login-btn{background:linear-gradient(45deg,#20B2AA,#48D1CC);color:#fff;border:none;padding:8px 16px;border-radius:20px;cursor:pointer;font-weight:bold;transition:.3s;box-shadow:0 4px 10px rgba(0,0,0,.2)}
        .login-btn:hover{transform:translateY(-2px);box-shadow:0 6px 15px rgba(0,0,0,.3)}
        .login-dropdown{display:none;position:absolute;top:40px;right:0;background:rgba(0,139,139,.95);backdrop-filter:blur(10px);border-radius:10px;overflow:hidden;box-shadow:0 8px 20px rgba(0,0,0,.3);min-width:150px}
        .login-dropdown.show{display:block}
        .login-dropdown button{width:100%;background:none;border:none;color:#fff;padding:12px;text-align:left;cursor:pointer;transition:.3s}
        .login-dropdown button:hover{background:rgba(255,255,255,.2)}
        .user-badge{position:fixed;top:15px;right:20px;background:rgba(255,255,255,.2);padding:8px 16px;border-radius:20px;font-weight:bold;display:none;align-items:center;gap:8px}
        .logout-btn{background:none;border:none;color:#fff;cursor:pointer;margin-left:8px;font-size:.9em;opacity:.8}
        .logout-btn:hover{opacity:1}

        /* ==========  UPLOAD / SERVER  ========== */
        .upload-area{border:2px dashed rgba(255,255,255,.6);border-radius:15px;padding:30px;text-align:center;margin-bottom:20px;transition:.3s}
        .upload-area:hover{border-color:#fff;background:rgba(255,255,255,.05)}
        #fileInput{display:none}
        .upload-label{cursor:pointer;font-weight:bold}
        .file-list{margin-top:15px;font-size:.9em}
        .file-item{display:flex;align-items:center;gap:8px;margin:4px 0}
        .check-btn{background:none;border:none;color:#4caf50;font-size:1.2em;cursor:pointer;transition:.2s}
        .check-btn:hover{transform:scale(1.2)}
        .check-btn.approved{color:#4caf50;cursor:default}
       
        /* ======  ADMIN DELETE  ====== */
        .del-btn{background:none;border:none;color:#ff6b6b;font-size:1.1em;cursor:pointer;margin-left:auto;transition:.2s}
        .del-btn:hover{transform:scale(1.2)}
    </style>
</head>
<body>
    <!-- ==========  LOGIN WIDGET  ========== -->
    <div class="login-widget" id="loginWidget">
        <button class="login-btn" onclick="toggleLoginMenu()">Login</button>
        <div class="login-dropdown" id="loginDropdown">
            <button onclick="login('guest')">Guest</button>
            <button onclick="login('developer')">Developer</button>
            <button onclick="login('admin')">Administrator</button>
        </div>
    </div>

    <!-- shown after login -->
    <div class="user-badge" id="userBadge">
        <span id="userLabel"></span>
        <button class="logout-btn" onclick="logout()">‚èª</button>
    </div>

    <div class="container">
        <nav class="sidebar" id="sidebar">
            <button class="toggle-btn" onclick="toggleSidebar()">‚ò∞</button>
            <ul class="nav-menu" id="navMenu">
                <li class="nav-item">
                    <a href="#" class="nav-link active" onclick="showSection('home')">Home</a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" onclick="showSection('crew')">Crew</a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" onclick="showSection('about')">About</a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" onclick="showSection('contact')">Contact</a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" onclick="showSection('projects')">Projects</a>
                </li>
                <li class="nav-item">
                    <a href="https://reddit.com/r/bagstudios" class="nav-link reddit-link" target="_blank">Reddit</a>
                </li>
            </ul>
        </nav>

        <main class="main-content" id="mainContent">
            <section id="home" class="section active">
                <h1>Welcome to BAG Studios</h1>
                <p>Where creativity meets innovation in the digital realm. BAG Studios is your premier destination for cutting-edge digital solutions, creative designs, and transformative experiences.</p>
                <p>We believe in pushing boundaries, challenging the status quo, and creating digital masterpieces that leave lasting impressions. Our team of talented professionals is dedicated to bringing your vision to life with passion, precision, and unparalleled expertise.</p>
                <p>From concept to completion, we're here to make your digital dreams a reality. Join us on this incredible journey of creativity and innovation.</p>
            </section>

            <section id="crew" class="section">
                <h1>Our Crew</h1>
                <div class="crew-card">
                    <div class="crew-name">Arlo Grace</div>
                    <div class="crew-title">CEO, CTO, and Founder</div>
                </div>
                <div class="crew-card">
                    <div class="crew-name">Gray Oster</div>
                    <div class="crew-title">CFO</div>
                </div>
                <div class="crew-card">
                    <div class="crew-name">Bo Hook</div>
                    <div class="crew-title">VP</div>
                </div>
            </section>

            <section id="about" class="section">
                <h1>About BAG Studios</h1>
                <p>BAG Studios was founded with a simple yet powerful vision: to revolutionize the digital landscape through innovative design and cutting-edge technology. We are a team of passionate creators, developers, and dreamers who believe in the transformative power of digital experiences.</p>
                <p>Our journey began with a shared passion for creativity and technology. Today, we stand as a leading force in digital innovation, delivering exceptional solutions that inspire, engage, and delight users across the globe.</p>
                <p>At BAG Studios, we don't just build products ‚Äì we craft experiences that tell stories, solve problems, and create meaningful connections between brands and their audiences.</p>
            </section>

            <section id="contact" class="section">
                <h1>Contact Us</h1>
                <div class="contact-info">
                    <p>Ready to bring your vision to life? Get in touch with us!</p>
                    <a href="mailto:gafutb@outlook.com" class="email">gafutb@outlook.com</a>
                </div>
            </section>

            <section id="projects" class="section">
                <h1>Our Projects</h1>
                <div id="approvedProjects"></div>
                <h2>More Coming Soon!</h2>
                <p>We're constantly working on new and exciting projects. Check back soon for more innovative tools and applications from BAG Studios.</p>
            </section>

            <!-- ROLE-ONLY SECTIONS -->
            <section id="analytics" class="section"><h1>Analytics</h1><p>Total downloads: <strong id="dlCount">1 234 567</strong></p></section>
            <section id="badge" class="section"><h1>Badge</h1><div id="badgeCard" class="crew-card"><div class="crew-name" id="badgeName">-</div><div class="crew-title" id="badgeRole">-</div></div></section>
            <section id="upload" class="section">
                <h1>Upload</h1>
                <div class="upload-area">
                    <label for="fileInput" class="upload-label">üìÅ  Drop file here or click to select</label>
                    <input type="file" id="fileInput" onchange="handleFile(this.files)">
                    <div class="file-list" id="fileList"></div>
                </div>
            </section>
            <section id="server" class="section"><h1>Server Data</h1><pre id="serverPre">CPU: 42 % | MEM: 3.2 / 8 GB\nUptime: 12d 07h 53m</pre></section>
        </main>
    </div>

    <script>
        /* ----------  ORIGINAL  ---------- */
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            const mainContent = document.getElementById('mainContent');
            sidebar.classList.toggle('collapsed');
            mainContent.classList.toggle('expanded');
        }
        function showSection(sectionId) {
            const sections = document.querySelectorAll('.section');
            sections.forEach(section => section.classList.remove('active'));
            const navLinks = document.querySelectorAll('.nav-link');
            navLinks.forEach(link => link.classList.remove('active'));
            document.getElementById(sectionId).classList.add('active');
            event.target.classList.add('active');
        }

        /* ----------  LOGIN / ROLE  ---------- */
        const menus = {
            guest:   ['home','crew','about','contact','projects'],
            developer:['home','crew','about','contact','projects','analytics','upload','badge'],
            admin:   ['home','crew','about','contact','projects','analytics','upload','badge','server']
        };
        const niceNames = {home:'Overview',crew:'Crew',about:'About',contact:'Contact',projects:'Projects',analytics:'Analytics',upload:'Upload',badge:'Badge',server:'Server Data'};

        /* ----------  LOCKOUT + COPY/PASTE BLOCK  ---------- */
        let failCount = parseInt(sessionStorage.getItem('failCount')||'0');
        const MAX_FAIL = 3;
        function isLocked(){return sessionStorage.getItem('locked')==='true';}
        function lock(){sessionStorage.setItem('locked','true');alert('Account locked. Refresh the page to retry.');}
        document.addEventListener('copy',e=>{if(!isLocked()){lock();alert('Copy detected. Account locked.');}});
        document.addEventListener('paste',e=>{if(!isLocked()){lock();alert('Paste detected. Account locked.');}});

        /* ----------  ENCRYPTED USER DATA  ---------- */
        (function(){
            const raw = JSON.stringify({username:'Fireball',badge:'Admin',password:'be907206809759ecc573e74205c14e6205e68df0e2a9c1d4530065cf4c5fc2a2'});
            const key = 'BAGStudiosKey2025';
            let enc='';
            for(let i=0;i<raw.length;i++) enc+=String.fromCharCode(raw.charCodeAt(i)^key.charCodeAt(i%key.length));
            window.userDataEnc = btoa(enc);
        })();

        /* ----------  BADGE SECTION  ---------- */
        function loadBadge(){
            const raw = atob(window.userDataEnc);
            const key = 'BAGStudiosKey2025';
            let dec='';
            for(let i=0;i<raw.length;i++) dec+=String.fromCharCode(raw.charCodeAt(i)^key.charCodeAt(i%key.length));
            const obj = JSON.parse(dec);
            document.getElementById('badgeName').textContent = obj.username;
            document.getElementById('badgeRole').textContent = obj.badge;
        }

        /* ----------  UPLOAD  ---------- */
        function handleFile(files){
            if(!files.length) return;
            const file = files[0];
            const list = document.getElementById('fileList');
            const item = document.createElement('div');
            item.className='file-item';
            item.innerHTML=`üìÑ ${file.name}  (${(file.size/1024).toFixed(1)} KB)`;
            /* admin checkmark */
            const role = localStorage.getItem('role') || sessionStorage.getItem('role') || 'guest';
            if(role==='admin'){
                const chk=document.createElement('button');
                chk.className='check-btn'; chk.innerHTML='‚úÖ'; chk.title='Approve for Projects';
                chk.onclick=()=>approveFile(file.name,file.size,chk);
                const approved=JSON.parse(localStorage.getItem('approvedFiles')||'[]');
                if(approved.some(f=>f.name===file.name))chk.classList.add('approved');
                item.appendChild(chk);
            }
            list.appendChild(item);
            let uploaded = JSON.parse(sessionStorage.getItem('uploadedFiles')||'[]');
            uploaded.push({name:file.name,size:file.size,date:new Date().toISOString()});
            sessionStorage.setItem('uploadedFiles',JSON.stringify(uploaded));
            updateServerFiles();
        }
        function approveFile(name,size,btn){
            if(btn.classList.contains('approved'))return;
            const tag=prompt('Version tag for this file:','v1.0.0');
            if(!tag)return;
            let approved=JSON.parse(localStorage.getItem('approvedFiles')||'[]');
            approved.push({name:name,size:size,tag:tag});
            localStorage.setItem('approvedFiles',JSON.stringify(approved));
            btn.classList.add('approved');
            renderApprovedProjects();
        }
        function renderApprovedProjects(){
            const box=document.getElementById('approvedProjects');
            const approved=JSON.parse(localStorage.getItem('approvedFiles')||'[]');
            box.innerHTML='';
            approved.forEach(f=>{
                const card=document.createElement('div'); card.className='project-card';
                card.innerHTML=`
    <div class="project-header">
        <div class="project-name">${f.name}</div>
        <div style="display:flex;align-items:center;gap:8px">
            <div class="version-tag">${f.tag}</div>
            ${role==='admin'?`<button class="del-btn" title="Delete project" onclick="deleteProject('${f.name}')">‚ùå</button>`:''}
        </div>
    </div>
    <div class="project-description">Admin-approved release.</div>
    <a href="#" class="download-btn">
        <svg class="download-icon" fill="currentColor" viewBox="0 0 20 20"><path d="M10 3a1 1 0 011 1v5.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 111.414-1.414L9 9.586V4a1 1 0 011-1zM3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z"/></svg>
        Download
    </a>`;
                box.appendChild(card);
            });
        }
        function deleteProject(name){
    if(!confirm(`Delete ‚Äú${name}‚Äù forever?`))return;
    let approved=JSON.parse(localStorage.getItem('approvedFiles')||'[]');
    approved=approved.filter(f=>f.name!==name);
    localStorage.setItem('approvedFiles',JSON.stringify(approved));
    renderApprovedProjects();        // refresh the card list
        }        
        function updateServerFiles(){
            const box = document.getElementById('serverPre');
            const uploaded = JSON.parse(sessionStorage.getItem('uploadedFiles')||'[]');
            let txt = 'CPU: 42 % | MEM: 3.2 / 8 GB\nUptime: 12d 07h 53m\n\nüìÅ Uploaded Files:\n';
            if(!uploaded.length) txt+='   (none)';
            else uploaded.forEach(f=>txt+=`   ‚Ä¢ ${f.name}  ${(f.size/1024).toFixed(1)} KB  ${f.date}\n`);
            box.textContent = txt;
        }

        /* ----------  LOGIN DROPDOWN  ---------- */
        function toggleLoginMenu(){
            document.getElementById('loginDropdown').classList.toggle('show');
        }
        function login(role){
            if(isLocked()){alert('Account is locked. Refresh to retry.');return;}
            const remember = confirm('Remember me on this device?');
            sessionStorage.setItem('role',role);
            if(remember) localStorage.setItem('role',role);
            buildNav(role);
            document.getElementById('loginWidget').style.display='none';
            document.getElementById('userBadge').style.display='flex';
            document.getElementById('userLabel').textContent=role.charAt(0).toUpperCase()+role.slice(1);
            toggleLoginMenu();
            location.href='login.html';
        }
        function logout(){
            sessionStorage.removeItem('role');
            localStorage.removeItem('role');
            location.reload();
        }
        function buildNav(role='guest'){
            const nav = document.getElementById('navMenu');
            nav.innerHTML='';
            menus[role].forEach(id=>{
                const li=document.createElement('li');li.className='nav-item';
                li.innerHTML=`<a href="#" class="nav-link ${id==='home'?'active':''}" onclick="showSection('${id}')">${niceNames[id]}</a>`;
                nav.appendChild(li);
            });
            const li=document.createElement('li');li.className='nav-item';
            li.innerHTML=`<a href="https://reddit.com/r/bagstudios" class="nav-link reddit-link" target="_blank">Reddit</a>`;
            nav.appendChild(li);
        }

        /* ----------  PAGE LOAD  ---------- */
        window.addEventListener('DOMContentLoaded',()=>{
            const role = localStorage.getItem('role') || sessionStorage.getItem('role') || 'guest';
            if(role!=='guest'){
                buildNav(role);
                document.getElementById('loginWidget').style.display='none';
                document.getElementById('userBadge').style.display='flex';
                document.getElementById('userLabel').textContent=role.charAt(0).toUpperCase()+role.slice(1);
                loadBadge();
                updateServerFiles();
                renderApprovedProjects();
            }else buildNav('guest');
        });

        
    </script>
</body>
</html>
